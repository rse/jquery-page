!function(a){var b=function(a){this.root=a};b.prototype={insert:function(b,c){var d=this;if(2!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof b)throw new Error("invalid page id argument (string expected)");return a("> .jquery-page-container",d.root).append(a(c).attr("data-jquery-page-name",b).addClass("jquery-page-disabled")),this},remove:function(b){var c=this;if(1!==arguments.length)throw new Error("invalid number of arguments");if("string"!=typeof b)throw new Error("invalid page id argument (string expected)");var d=a("> .jquery-page-container > *",c.root).filter(function(c,d){return a(d).attr("data-jquery-page-name")===b});if(0===d.length)throw new Error('no such page "'+b+'" found');if(a(d).hasClass("jquery-page-active")){var e=c.existing().filter(function(a){return a!==b});e.length>0&&c.transition(e[0],"none")}return a(d).remove(),this},fetch:function(b){var c=this;if(0===arguments.length)throw new Error("missing page id");if(1===arguments.length&&"string"!=typeof b)throw new Error("invalid page id argument (string expected)");var d=a("> .jquery-page-container > *",c.root).filter(function(c,d){return a(d).attr("data-jquery-page-name")===b});if(d.length>1)throw new Error('more than one page with id "'+b+'" found');return 0===d.length?null:d.get(0)},existing:function(){var b=this;if(0!==arguments.length)throw new Error("invalid number of arguments");var c=[];return a("> .jquery-page-container > *",b.root).each(function(){c.push(a(this).attr("data-jquery-page-name"))}),c},active:function(){var b=this;if(0!==arguments.length)throw new Error("invalid number of arguments");var c=a("> .jquery-page-container > .jquery-page-active",b.root);if(0===c.length)throw new Error("internal error: no active page found");if(c.length>1)throw new Error("internal error: more than one active page found");return c.attr("data-jquery-page-name")},shake:function(b){var c=this;if(arguments.length<0||arguments.length>1)throw new Error("invalid number of arguments (0 or 1 expected)");if(1===arguments.length&&"function"!=typeof b)throw new Error("invalid complete argument (function expected)");var d=a("> .jquery-page-container",c.root),e=a(c.root).width();return a(d).width(e).addClass("jquery-page-shake").one("animationend",function(){a(d).css("width","").removeClass("jquery-page-shake"),"function"==typeof b&&b.call(this)}),this},transition:function(b,c,d){var e=this;if(arguments.length<2||arguments.length>3)throw new Error("invalid number of arguments (2 or 3 expected)");if("string"!=typeof b)throw new Error("invalid page id argument (string expected)");if("string"!=typeof c)throw new Error("invalid transition type argument (string expected)");if(3===arguments.length&&"function"!=typeof d)throw new Error("invalid complete argument (function expected)");var f=a("> .jquery-page-container",e.root),g=a("> .jquery-page-container > .jquery-page-active",e.root);if("none"!==c&&0===g.length)throw new Error("internal error: no active page found");if("none"!==c&&g.length>1)throw new Error("internal error: more than one active page found");var h=a("> .jquery-page-container > *",e.root).filter(function(c,d){return a(d).attr("data-jquery-page-name")===b});if(0===h.length)throw new Error('no such page "'+b+'" found');if(h.length>1)throw new Error('more than one page with id "'+b+'" found');var i,j,k=a(e.root).width(),l=a(e.root).height();if("none"===c)a(g).removeClass("jquery-page-active").addClass("jquery-page-disabled"),a(h).removeClass("jquery-page-disabled").addClass("jquery-page-active"),"function"==typeof d&&d.call(this,b);else if(null!==(i=c.match(/^slide-in-from-(left|right)$/)))j=i[1],a(f).width(2*k).css("left","left"===j?-k:0).addClass("jquery-page-horizontal"),a(g).width(k).addClass("left"===j?"jquery-page-right":"jquery-page-left"),a(h).width(k).addClass("left"===j?"jquery-page-left":"jquery-page-right").removeClass("jquery-page-disabled"),a(f).addClass("jquery-page-slide").css("transform","translate("+("left"===j?"":"-")+k+"px,0)").one("transitionend",function(){a(g).addClass("jquery-page-disabled").removeClass("left"===j?"jquery-page-right":"jquery-page-left").removeClass("jquery-page-active").css("width",""),a(h).removeClass("left"===j?"jquery-page-left":"jquery-page-right").addClass("jquery-page-active").css("width",""),a(f).css("width","").css("transform","").css("left","").removeClass("jquery-page-horizontal").removeClass("jquery-page-slide"),"function"==typeof d&&d.call(this,b)});else if(null!==(i=c.match(/^slide-in-from-(top|bottom)$/)))j=i[1],a(f).height(2*l).css("top","top"===j?-l:0).addClass("jquery-page-vertical"),a(g).addClass("top"===j?"jquery-page-bottom":"jquery-page-top").height(l),a(h).addClass("top"===j?"jquery-page-top":"jquery-page-bottom").removeClass("jquery-page-disabled").height(l),a(f).addClass("jquery-page-slide").css("transform","translate(0,"+("top"===j?"":"-")+l+"px)").one("transitionend",function(){a(g).addClass("jquery-page-disabled").removeClass("top"===j?"jquery-page-bottom":"jquery-page-top").removeClass("jquery-page-active").css("height",""),a(h).removeClass("top"===j?"jquery-page-top":"jquery-page-bottom").addClass("jquery-page-active").css("height",""),a(f).css("height","").removeClass("jquery-page-vertical").removeClass("jquery-page-slide").css("transform","").css("top",0),"function"==typeof d&&d.call(this,b)});else{if(null===(i=c.match(/^flip-towards-(left|right)$/)))throw new Error("invalid transition type");j=i[1],a(f).addClass("jquery-page-stacked").width(k),a(g).addClass("jquery-page-front").width(k),a(h).addClass("jquery-page-back").removeClass("jquery-page-disabled").width(k),a(f).addClass("jquery-page-flip-"+j).one("transitionend",function(){a(g).addClass("jquery-page-disabled").removeClass("jquery-page-front").removeClass("jquery-page-active").css("width",""),a(h).removeClass("jquery-page-back").addClass("jquery-page-active").css("width",""),a(f).css("width","").removeClass("jquery-page-stacked").removeClass("jquery-page-flip-"+j),"function"==typeof d&&d.call(this,b)})}return this}},a.fn.extend({page:function(){var c=null;return this.each(function(){var d=a(this).data("jquery-page-api");if(!d){d=new b(this),a(this).data("jquery-page-api",d).addClass("jquery-page");var e=a("> *",this);if(0===e.length)e=a("<div></div>"),a(this).append(e);else if(1!==e.length)throw new Error("require a single container element under jQuery Page root element");a(e).addClass("jquery-page-container"),a("> *",e).addClass("jquery-page-disabled"),a("> *:first",e).removeClass("jquery-page-disabled").addClass("jquery-page-active")}c=d}),c}})}(jQuery);